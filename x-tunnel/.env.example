# suoha x-tunnel 环境变量配置示例
#
# 复制此文件为 .env 并根据实际情况填写配置
# 命令: cp .env.example .env
#
# 注意:
# 1. 所有值都应使用双引号包裹
# 2. 行首的 # 表示注释，可以删除或保留
# 3. 空行会被忽略
# 4. 只有必要的变量需要填写，其他可以使用默认值

# ============================================
# Cloudflare API 配置 (API 自动创建模式必需)
# ============================================

# Cloudflare API Token
# 必需，用于创建和管理 Cloudflare Tunnel
# 获取方式: Cloudflare Dashboard -> My Profile -> API Tokens -> Create Token
# 所需权限:
#   - Account: Cloudflare Tunnel -> Edit
#   - Account: DNS Settings -> Edit
#   - Zone: Zone Settings -> Read
#   - Account Resources: Include -> Specific zone -> [选择你的域名]
# 示例: "123456789abcdef123456789abcdef12345678"
cf_api_token=""

# Cloudflare Zone ID
# 必需，标识你要操作的域名所在的区域
# 获取方式: Cloudflare Dashboard -> 选择域名 -> 右侧边栏找到 Zone ID
# 示例: "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6"
cf_zone_id=""

# ============================================
# 隧道域名配置 (API 自动创建模式必需)
# ============================================

# 隧道域名
# 必需，用于绑定的完整域名（子域名或主域名）
# 要求: 域名必须在 Cloudflare 上托管
# 示例: "tunnel.example.com" 或 "sub.mydomain.com"
cf_domain=""

# 隧道名称
# 可选，Cloudflare Tunnel 的显示名称
# 默认值: "x-tunnel-auto"
# 限制: 只能包含字母、数字、连字符
# 示例: "my-production-tunnel"
cf_tunnel_name="x-tunnel-auto"

# ============================================
# x-tunnel 配置
# ============================================

# x-tunnel 身份令牌
# 可选，用于访问控制
# 设置后访问时需要提供此令牌
# 留空表示无需认证
# 示例: "my-secret-token-123"
token=""

# x-tunnel 监听端口
# 可选，x-tunnel 服务监听的本地端口
# 默认值: 56789
# 注意: 端口范围 1024-65535，确保端口未被占用
# 示例: "56789"
port="56789"

# ============================================
# Opera 代理配置
# ============================================

# 是否启用 Opera 前置代理
# 可选，启用后会通过 Opera 代理转发流量，提供额外的匿名性
# 值: 0 (不启用) 或 1 (启用)
# 默认值: "0"
# 示例: "1"
opera="0"

# Opera 国家代码
# 可选，选择 Opera 代理服务器的地区
# 值: "AM" (北美), "AS" (亚太), "EU" (欧洲)
# 默认值: "AM"
# 注意: 只有启用 Opera 代理 (opera=1) 时此参数才生效
# 示例: "AS"
country="AM"

# ============================================
# Cloudflare 连接配置
# ============================================

# Cloudflare 连接模式
# 可选，选择 cloudflared 连接使用的 IP 版本
# 值: "4" (IPv4) 或 "6" (IPv6)
# 默认值: "4"
# 示例: "6"
ips="4"

# ============================================
# Cloudflare 固定隧道配置 (固定隧道模式)
# ============================================

# Cloudflare 固定隧道令牌
# 可选，使用预先在 Cloudflare 后台创建的固定隧道
# 获取方式: Cloudflare Dashboard -> Zero Trust -> Networks -> Tunnels -> 创建隧道 -> 获取 Token
# 注意: 如果使用此模式，不需要设置 cf_api_token, cf_zone_id, cf_domain
# 示例: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
tunnel_token=""

# ============================================
# 使用示例
# ============================================
#
# 1. 基础配置 (Quick Tunnel 模式):
#    只需配置 token 即可启用 Token 认证
#    token="my-token"
#
# 2. API 自动创建模式 (推荐):
#    cf_api_token="YOUR_API_TOKEN"
#    cf_zone_id="YOUR_ZONE_ID"
#    cf_domain="tunnel.example.com"
#    cf_tunnel_name="my-tunnel"
#
# 3. 固定隧道模式:
#    tunnel_token="YOUR_TUNNEL_TOKEN"
#
# 4. 完整配置 (API 自动创建 + Opera 代理):
#    cf_api_token="YOUR_API_TOKEN"
#    cf_zone_id="YOUR_ZONE_ID"
#    cf_domain="tunnel.example.com"
#    cf_tunnel_name="my-tunnel"
#    opera="1"
#    country="AM"
#    token="my-secret-token"
#    port="56789"
#    ips="4"
#
# ============================================
# 运行脚本
# ============================================
#
# 使用 .env 文件加载配置:
#   ./suoha-x.sh install -e
#
# 查看帮助:
#   ./suoha-x.sh --help
#
# 查看状态:
#   ./suoha-x.sh status
#
# 停止服务:
#   ./suoha-x.sh stop
#
# 完全卸载 (API 自动创建模式需要提供 API Token 和 Zone ID):
#   ./suoha-x.sh remove -a "YOUR_API_TOKEN" -z "YOUR_ZONE_ID"
